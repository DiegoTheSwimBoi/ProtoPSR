# PSR-16: Общий интерфейс для кэширующих библиотек.

### Этот документ описывает простой, но расширяемый интерфейс для элемента кэша и драйвера кэша.

![Дарова. Чекаешь альты?](https://pbs.twimg.com/profile_images/1444689501880737797/xtLL2gE7_400x400.jpg)


Ключевые слова **"MUST"**, **"MUST NOT"**, **"REQUIRED"**, **"SHALL"**, **"SHALL NOT"**, **"SHOULD"**, **"SHOULD NOT"**, **"RECOMMENDED"**,  **"MAY"**, и **"OPTIONAL"** в этом документе являются следует интерпретировать, как описано в [RFC 2119](https://www.rfc-archive.org/getrfc.php?rfc=2119#gsc.tab=0).

Окончательные реализации **MAY** украсить объекты большей функциональностью, чем предложенная, но они **MUST** сначала реализовать указанные интерфейсы / функциональность.

## 1.1 Введение
Кэширование - это распространенный способ улучшить производительность любого проекта, что делает библиотеки кеширования одной из наиболее распространенных функций многих фреймворков и библиотек. Функциональная совместимость на этом уровне означает, что библиотеки могут отказаться от своих собственных реализаций кэширования и легко полагаться на ту, которую им предоставил фреймворк, или другая выделенная библиотека кеширования.

PSR-6 уже решает эту проблему, но довольно формальным и подробным способом для самых простых случаев использования. Этот более простой подход направлен на создание стандартизированного оптимизированного интерфейса для общих случаев. Он не зависит от PSR-6, но был разработан, чтобы максимально упростить совместимость с PSR-6.

## 1.2 Определения
Определения для библиотеки вызовов, реализации библиотеки, TTL, срока действия и ключа скопированы из PSR-6, поскольку те же предположения верны.

* Вызов библиотеки - библиотека или код, который действительно нуждается в службах кеширования. Эта библиотека будет использовать службы кэширования, которые реализуют интерфейсы этого стандарта, но в противном случае не будет знать о реализации этих служб кэширования.

* Реализация библиотеки - эта библиотека отвечает за реализацию этого стандарта, чтобы предоставлять услуги кэширования любой библиотеке вызовов. Библиотека реализации MUST предоставлять класс, реализующий интерфейс Psr \ SimpleCache \ CacheInterface. Реализация библиотек MUST поддерживать минимальную функциональность TTL, как описано ниже, с точностью до секунды.

* TTL - время жизни (TTL) элемента - это промежуток времени между тем, когда этот элемент сохраняется, и считается устаревшим. TTL обычно определяется целым числом, представляющим время в секундах, или объектом DateInterval.

* Истечение срока - фактическое время, когда элемент настроен на то, чтобы стать устаревшим. Это вычисляется путем добавления TTL ко времени хранения объекта.

Элемент с 300-секундным TTL, сохраненным в 1:30:00, будет иметь срок действия 1:35:00.



Реализация библиотек MAY истечь элемент до его запрошенного времени истечения срока действия, но MUST рассматривать элемент как истекший по истечении срока его действия. Если вызывающая библиотека запрашивает сохранение элемента, но не указывает время истечения срока действия или указывает нулевое время истечения срока действия или TTL, Реализационная библиотека MAY  использовать настроенную продолжительность по умолчанию. Если длительность по умолчанию не была установлена, Библиотека реализации MUST интерпретировать это как запрос на кэширование элемента навсегда или до тех пор, пока базовая реализация поддерживает.

Если указан отрицательный или нулевой TTL, элемент MUST быть удален из кеша, если он существует, поскольку срок его действия уже истек.

* Ключ - строка по крайней мере из одного символа, которая однозначно идентифицирует кэшированный элемент. Реализация библиотеки должен поддерживать ключи , состоящие из символов __A-Z__, __a-z__, __0-9__, __ _ __ , и .в любом порядке в UTF-8 кодировке и длиной до 64 символов. Реализуемые библиотеки MUST поддерживать дополнительные символы и кодировки или более длинные длины, но MAY поддерживать как минимум этот минимум. Библиотеки несут ответственность за собственное экранирование ключевых строк в зависимости от ситуации, но MUST иметь возможность возвращать исходную немодифицированную строку ключей. Следующие символы зарезервированы для будущих расширений и MUST NOT поддерживаться реализующими библиотеками:__{}()/\@:__

[Источник PHP-FIG](https://www.php-fig.org/psr/psr-16/)
